<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine üíñ</title>

<style>
body{
    margin:0;
    font-family:sans-serif;
    background:#ffd6dc;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
}

/* ===== TEXT SCALE ===== */
h1{ font-size:2.4em; margin:15px 0; }
h2{ font-size:1.8em; margin:15px 0; }

/* ================= PAGE 1 ================= */

#page1{
    display:flex;
    justify-content:center;
    align-items:center;
    width:100%;
}

#startBtn{
    font-size:68px;
    padding:50px 140px;
    border-radius:80px;
    border:none;
    background:#ff4d6d;
    color:white;
    cursor:pointer;
    box-shadow:0 15px 30px rgba(0,0,0,0.3);
    animation:wiggle 2s infinite ease-in-out;
}

/* ================= PAGE 2 ================= */

#page2{
    display:none;
    background:#f2f2f2;
    padding:60px;
    border-radius:35px;
    width:90%;
    max-width:800px;
    text-align:center;
    position:relative;
}

#buttons{
    position:relative;
    width:100%;
    height:300px;
    margin-top:50px;
}

.choice{
    position:absolute;
    font-size:36px; /* ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏•‡∏á 30% ‡πÅ‡∏•‡πâ‡∏ß */
    padding:18px 50px;
    border-radius:50px;
    border:none;
    cursor:pointer;
    animation:wiggle 2s infinite ease-in-out;
    transition:left 0.45s ease-out, top 0.45s ease-out;
}

#yes{ background:#ff4d6d; color:white; }
#no{ background:#888; color:white; }

/* ================= PAGE 3 ================= */

#page3{
    display:none;
    background:#f5f5f5;
    padding:60px;
    border-radius:35px;
    width:90%;
    max-width:850px;
    text-align:center;
    position:relative;
}

/* üéÅ Gift */

.gift-wrapper{
    margin-top:50px;
    display:flex;
    justify-content:center;
}

.gift{
    position:relative;
    width:190px;
    height:190px;
    animation:wiggle 2s infinite ease-in-out;
}

.box{
    width:100%;
    height:100%;
    background:linear-gradient(145deg,#ff4d4d,#a80000);
    border-radius:28px;
    box-shadow:
        0 18px 0 #7a0000,
        0 30px 40px rgba(0,0,0,0.35);
    display:flex;
    justify-content:center;
    align-items:center;
    color:white;
    font-size:32px;
    font-weight:bold;
}

.lid{
    position:absolute;
    top:-40px;
    width:100%;
    height:60px;
    background:linear-gradient(145deg,#ff6666,#cc0000);
    border-radius:25px;
    box-shadow:0 12px 0 #7a0000;
    transition:transform 0.6s cubic-bezier(.2,.8,.3,1);
    transform-origin:bottom;
}

.gift.open .lid{
    transform:rotateX(130deg);
}

/* ===== Wiggle ===== */
@keyframes wiggle{
    0%,100%{ transform:scale(1); }
    50%{ transform:scale(1.08); }
}

/* üåπ Roses */
.rose{
    position:absolute;
    font-size:95px;
    pointer-events:none;
    animation:fly 4s ease-out forwards;
}

@keyframes fly{
    0%{
        transform:translate(-50%,0) scale(0.6);
        opacity:1;
    }
    100%{
        transform:translate(calc(-50% + var(--x)), var(--y)) scale(1.7);
        opacity:0;
    }
}
</style>
</head>

<body>

<!-- üéµ MUSIC -->
<audio id="bgm" src="music.mp3" loop></audio>

<!-- PAGE 1 -->
<div id="page1">
    <button id="startBtn">Click me üíå</button>
</div>

<!-- PAGE 2 -->
<div id="page2">
    <h1>Will you be my Valentine? üíñ</h1>
    <h2>ÁßÅ„ÅÆ„Éê„É¨„É≥„Çø„Ç§„É≥„Å´„Å™„Å£„Å¶„Åè„Çå„Åæ„Åô„ÅãÔºü</h2>

    <div id="buttons">
        <button id="yes" class="choice">Yes</button>
        <button id="no" class="choice">No</button>
    </div>
</div>

<!-- PAGE 3 -->
<div id="page3">
    <h1>Happy Valentine‚Äôs Day üíñ</h1>
    <h2>„Éè„ÉÉ„Éî„Éº„Éê„É¨„É≥„Çø„Ç§„É≥„Éá„Éº üíñ</h2>
    <h1>I love you ‚ù§Ô∏è</h1>
    <h2>ÊÑõ„Åó„Å¶„Çã ‚ù§Ô∏è</h2>

    <div class="gift-wrapper" onclick="openGiftLoop()">
        <div class="gift" id="gift">
            <div class="lid"></div>
            <div class="box">For You üéÅ</div>
        </div>
    </div>
</div>

<script>
const page1=document.getElementById("page1");
const page2=document.getElementById("page2");
const page3=document.getElementById("page3");
const startBtn=document.getElementById("startBtn");
const yes=document.getElementById("yes");
const no=document.getElementById("no");
const buttons=document.getElementById("buttons");
const bgm=document.getElementById("bgm");

let lastNoX=0,lastNoY=0;

/* ===== Start ===== */
startBtn.onclick=()=>{
    page1.style.display="none";
    page2.style.display="block";

    const center = buttons.clientWidth/2;

    yes.style.left = (center - yes.offsetWidth - 30)+"px";
    yes.style.top = "120px";

    no.style.left = (center + 30)+"px";
    no.style.top = "120px";

    lastNoX=no.offsetLeft;
    lastNoY=no.offsetTop;
};

/* ===== Move NO ===== */
function moveNo(){
    const maxX=buttons.clientWidth-no.offsetWidth;
    const maxY=buttons.clientHeight-no.offsetHeight;

    let x,y;
    do{
        x=Math.random()*maxX;
        y=Math.random()*maxY;
    }while(
        (x < yes.offsetLeft + yes.offsetWidth &&
        x + no.offsetWidth > yes.offsetLeft &&
        y < yes.offsetTop + yes.offsetHeight &&
        y + no.offsetHeight > yes.offsetTop)
        ||
        (Math.abs(x-lastNoX)<80 && Math.abs(y-lastNoY)<80)
    );

    no.style.left=x+"px";
    no.style.top=y+"px";

    lastNoX=x;
    lastNoY=y;
}

no.onmouseover=moveNo;
no.onclick=moveNo;

/* ===== YES CLICK ===== */
yes.onclick=()=>{
    bgm.play(); // ‚ñ∂Ô∏è ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á
    page2.style.display="none";
    page3.style.display="block";
};

/* ===== Roses ===== */
function openGiftLoop(){
    const gift=document.getElementById("gift");
    gift.classList.add("open");

    let count=0;
    const interval=setInterval(()=>{
        shootRoses();
        count++;
        if(count>=5) clearInterval(interval);
    },900);
}

function shootRoses(){
    const gift=document.getElementById("gift");

    for(let i=0;i<18;i++){
        const rose=document.createElement("div");
        rose.className="rose";
        rose.innerHTML="üåπ";

        rose.style.left="50%";
        rose.style.top="0px";

        const angle=Math.PI + (Math.random()*Math.PI);
        const distance=450+Math.random()*350;

        const x=Math.cos(angle)*distance;
        const y=Math.sin(angle)*distance;

        rose.style.setProperty('--x',x+'px');
        rose.style.setProperty('--y',y+'px');

        gift.appendChild(rose);

        setTimeout(()=>rose.remove(),4000);
    }
}
</script>

</body>
</html>
